<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mysql</title>
    <script type="text/javascript" src="./vue.js"></script>
    <script type="text/javascript" src="./axios.js"></script>
    <!-- 新 Bootstrap4 核心 CSS 文件 -->
    <link rel="stylesheet" href="./BS/bootstrap.min.css">
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="./BS/jquery.js"></script>
    <!-- bootstrap.bundle.min.js 用于弹窗、提示、下拉菜单，包含了 popper.min.js -->
    <script src="./BS/bootstrap.bundle.min.js"></script>
    <!-- 最新的 Bootstrap4 核心 JavaScript 文件 -->
    <script src="./BS/bootstrap.min.js"></script>
    <style>
        li {
            list-style: none;
            float: left
        }
    </style>
</head>

<body>
    <div class="row">
        <div id="app" class="col-md-12">
            <ul v-for="item of info">
                <li class="col-md-3">
                    ID：{{item.id}}
                </li>
                <li class="col-md-3">
                    名称：{{item.tagname}}
                </li>
                <li class="col-md-3">
                    logo：{{item.logo}}
                </li>
                <li class="col-md-3">
                    create_at:{{item.created_at}}
                </li>
            </ul>
        </div>
    </div>

    <div id="login">
        <input type="text" placeholder="输入账号">
        <input type="password" placeholder="密码">
        <input type="submit" value="提交">
    </div>
</body>
<script>
    new Vue({
        el: "#app",
        data() {
            return {
                info: null
            }
        },
        mounted() {
            axios
                .get('/api/myResult')
                .then(response => (this.info = response.data))
                .catch(function(error) {
                    console.log(error)
                })
        }
    });
    // 创建cookie
    function setCookie(c_name, value, expiredays) {
        var exdate = new Date();
        exdate.setDate(exdate.getDate() + expiredays);
        document.cookie = c_name + "=" + escape(value) +
            ((expiredays == null) ? "" : "; expires=" + exdate.toGMTString());
    }
    // 读取cookie
    function getCookie(c_name) {
        if (document.cookie.length > 0) {
            c_start = document.cookie.indexOf(c_name + "=");
            if (c_start != -1) {
                c_start = c_start + c_name.length + 1;
                c_end = document.cookie.indexOf(";", c_start)

                if (c_end == -1) {
                    c_end = document.cookie.length;
                }
                return unescape(document.cookie.substring(c_start, c_end));
            }
        }
        return "";
    }


    const crypto = require('crypto');
    /********hmac-sha1加密***************/
    var content = 'password'; //加密的明文；
    var token1 = 'miyue'; //加密的密钥；
    var buf = crypto.randomBytes(16);
    token1 = buf.toString('hex'); //密钥加密；
    console.log("生成的token(用于加密的密钥):" + token1);
    var SecrectKey = token1; //秘钥；
    var Signture = crypto.createHmac('sha1', SecrectKey); //定义加密方式
    Signture.update(content);
    var miwen = Signture.digest().toString('base64'); //生成的密文后将再次作为明文再通过pbkdf2算法迭代加密；
    console.log("加密的结果f：" + miwen);

    document.cookie = `name=xiaoli,passwold=${miwen}`
    alert(document.cookie)
</script>

</html>